#
# Virtual host configuration for Apache web server with mod_wsgi
#


Define URL        morebooks.ml
Define ADMIN      sio.wtf@gmail.com
Define WSGI_USER  sio
Define WSGI_GROUP sio
Define WSGI_DIR   /home/sio/application
Define STATIC_DIR /usr/local/www/morebooks


<VirtualHost *:443>

    ServerName ${URL}
    ServerAlias www.${URL}
    ServerAdmin ${ADMIN}

    SSLEngine On
    SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

    ErrorLog  ${APACHE_LOG_DIR}/${URL}-errors.log
    CustomLog ${APACHE_LOG_DIR}/${URL}-access.log combined

    <Directory ${STATIC_DIR}>
        Options FollowSymlinks
        Require all granted
    </Directory>

    DocumentRoot ${STATIC_DIR}
    Alias /robots.txt ${STATIC_DIR}/robots.txt
    Alias /favicon.ico ${STATIC_DIR}/favicon.ico
    #Alias /media/ ${STATIC_DIR}/media/

    <Directory ${WSGI_DIR}>
        Options FollowSymlinks
        Require all granted
    </Directory>

    WSGIScriptAlias / ${WSGI_DIR}/wsgi.py
    #WSGIPassAuthorization On
    WSGIDaemonProcess ${URL} \
                      user=${WSGI_USER} \
                      group=${WSGI_GROUP} \
                      processes=2 \
                      threads=15 \
                      display-name=(${URL})
    WSGIProcessGroup ${URL}

    LogLevel info

</VirtualHost>

# vim: syntax=apache
