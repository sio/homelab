# Attach the device
ACTION=="add" \
, ATTRS{idVendor}=="{{ virtual_usb_vendor[2:] }}" \
, ATTRS{idProduct}=="{{ virtual_usb_device[2:] }}" \
, RUN+="/usr/bin/virsh attach-device {{ virtual_usb_domain }} --file {{ virtual_usb_definition }}"

# Make changes permanent
ACTION=="add" \
, ATTRS{idVendor}=="{{ virtual_usb_vendor[2:] }}" \
, ATTRS{idProduct}=="{{ virtual_usb_device[2:] }}" \
, RUN+="/usr/bin/virsh attach-device {{ virtual_usb_domain }} --file {{ virtual_usb_definition }} --persistent"

# TODO: add remove handler?
