---

- include: assert.yml

- include: list.yml

- when: cups_printer_name not in cups_printer_lpstat.stdout
  block:
    - include: add.yml
    - include: list.yml  # refresh cups_printer_lpstat

- name: confirm that printer was added
  debug:
    var: cups_printer_lpstat
  failed_when: cups_printer_name not in cups_printer_lpstat.stdout
